// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);r.prototype=t.prototype;e.prototype=new r;e.__super__=t.prototype;return e};r=require("atom"),t=r.Point,n=r.View;module.exports=e=function(e){function t(e){var n,r,i,s,o,u,a,f,l,c,h;r=e.editor,i=e.editorView,h=e.title,u=e.line,l=e.start,s=e.end,n=e.content,o=e.klass,a=e.min;this.title=h;this.line=u-1;this.start=l;this.end=s;this.content=n;this.klass=o;this.editor=r;this.editorView=i;this.messages=[{content:this.content,src:this.title}];c=this.calculateStyle(this.line,this.end);t.__super__.constructor.call(this,{messages:this.messages,klass:this.klass,style:c});this.min&&this.minimize();i=atom.workspaceView.getActiveView();f=i.find(".overlayer");f&&f.first().prepend(this)}s(t,e);t.content=function(e){var t=this;return this.div({"class":"inline-message "+e.klass,style:e.style},function(){var n,r,i,s,o;s=e.messages;o=[];for(r=0,i=s.length;r<i;r++){n=s[r];o.push(t.div({"class":"message-content"},function(){t.div({"class":"message-source"},function(){return t.raw(n.src)});return t.div({"class":"message-body"},function(){return t.raw(n.content)})}))}return o})};t.prototype.calculateStyle=function(e,t){var n,r,i,s;if(this.editorView&&this.editor){t=this.editor.getBuffer().lineLengthForRow(e);n=this.editorView.pixelPositionForBufferPosition({row:e,column:0});r=this.editorView.pixelPositionForBufferPosition({row:e,column:t});s=n.top;i=r.left;i<640&&(i=640);i+=25;return"position:absolute;left:"+i+"px;top:"+s+"px;"}};t.prototype.update=function(){var e,t,n,r,i,s,o,u,a;n=null;this.find(".message-content").remove();i="";a=this.messages;for(o=0,u=a.length;o<u;o++){r=a[o];if(r.src===n){e="<div class='message-body'>"+r.content+"</div>";t="<div class='message-content'>"+e+"</div>"}else{s="<div class='message-source'>"+r.src+"</div>";e="<div class='message-body'>"+r.content+"</div>";t="<div class='message-content'>"+s+e+"</div>"}n=r.src;i+=t}return this.append(i)};t.prototype.add=function(e,t){this.messages.push({content:t,src:e});return this.update()};return t}(n)}).call(this);